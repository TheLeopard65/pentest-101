
# Simple Cross-Site Request Forgery (CSRF) Guide
Simple Cross-Site Request Forgery (CSRF) is an attack that tricks a user into performing an action on a web application where they are authenticated, without their consent. This guide details the steps to manually perform and detect a Simple CSRF attack.

## Steps to Perform Manual Simple CSRF
### 1. **Identify Target Application and Actions**
1. **Explore the Application**:  Navigate through the application and identify actions that can be performed without additional authentication checks. Common targets include changing user settings, making financial transactions, or performing administrative tasks.
2. **Determine Authentication Requirements**: Ensure that the target action requires user authentication, meaning the user must be logged in to perform it.
3. **Identify Action Endpoints**: Look for the URLs and HTTP methods used for these actions. This can be done by inspecting network traffic (e.g., using browser developer tools) or analyzing the application’s source code.

### 2. **Craft a Malicious Request**
1. **Construct the Request**: Create an HTML form or JavaScript code that submits a request to the target endpoint. The goal is to make a request that performs the desired action using the victim’s credentials. **Example of an HTML Form Payload**:
   ```html
   <form action="http://target.com/change-email" method="POST" style="display:none;">
     <input type="hidden" name="email" value="attacker@example.com">
     <input type="submit" value="Submit">
   </form>
   <script>
     document.forms[0].submit();
   </script>
   ```
   **Example of a JavaScript Payload**:
   ```html
   <script>
     fetch('http://target.com/change-email', {
       method: 'POST',
       headers: {
         'Content-Type': 'application/x-www-form-urlencoded'
       },
       body: new URLSearchParams({
         'email': 'attacker@example.com'
       })
     });
   </script>
   ```
2. **Host the Malicious Code**: Place the crafted payload on a webpage or email that will be accessed by the victim. This can be done by embedding the HTML form or JavaScript in a web page you control or in an email sent to the victim.

### 3. **Verify the CSRF Attack**
1. **Trigger the Payload**: Ensure that the victim accesses the malicious page or email while authenticated on the target application. The payload should automatically trigger the request using the victim’s credentials.
2. **Check the Target Application**: Verify if the action has been performed. For instance, if you were trying to change the victim’s email address, check if the email address on their account has been updated.
3. **Analyze Results**: Confirm that the request was processed successfully without additional authentication or confirmation prompts.

### 4. **Document and Report Findings**
1. **Record Details**: Document the steps you took to perform the CSRF attack, including the payloads used, the targeted URLs, and the results of the attack.
2. **Capture Evidence**: Take screenshots or save the request/response logs that demonstrate the successful execution of the CSRF attack.
3. **Assess Impact**: Evaluate the potential impact of the CSRF vulnerability. Determine how it could affect the security and integrity of the target application and the users.
4. **Provide Recommendations**: Suggest remediation strategies to mitigate the CSRF vulnerability, such as implementing anti-CSRF tokens, checking `SameSite` cookie attributes, and using additional user confirmation steps for critical actions.

## EXAMPLE SCENARIO: Testing a Profile Update Feature

1. **Identify Injection Point**: Suppose you have identified a profile update endpoint: `http://target.com/update-profile`.
2. **Craft a Malicious Request**: Create a form that changes the user’s profile information:
     ```html
     <form action="http://target.com/update-profile" method="POST" style="display:none;">
       <input type="hidden" name="name" value="Attacker">
       <input type="submit" value="Submit">
     </form>
     <script>
       document.forms[0].submit();
     </script>
     ```
3. **Host the Payload**: Host this form on a malicious webpage or send it in an email to the target.
4. **Verify the Attack**: Ensure that the victim accesses the malicious page while logged into their account. Check if their profile has been updated with the attacker’s name.

## Conclusion
Simple CSRF attacks exploit the lack of additional checks on state-changing requests. By following these steps, you can manually test for CSRF vulnerabilities and assess the impact of such attacks.

Always conduct penetration testing with proper authorization and adhere to ethical guidelines. Implementing CSRF protections such as anti-CSRF tokens and secure cookie attributes is crucial to safeguarding web applications from these attacks.
